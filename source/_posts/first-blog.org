#+TITLE: 使用 Emacs 的 org-mode 写博客
#+DATE: <2016-04-25 20:57:32>
#+TAGS: Hexo,  Emacs
#+CATEGORIES: 工具链


** 居中引用

   {% cq %} 这里是居中引用, centerquote  的别名 {% endcq %}

** 插入代码

   #+BEGIN_SRC bash
   <s Tab
   #+END_SRC


** 插入截图

   在需要截图的地方输入

   #+BEGIN_SRC bash
   M-x capture-screenshot
   #+END_SRC

   Emacs 会让你给截图起个名字（按提示在 miniBuffer 中输入即可），然后调用 **screencapture** 这个命令行程序截图、将下面的字符串插入到你调用该命令的地方

   {% fi /images/2016.04.26.22.46.captureShow.png %}

   截图相关的代码如下:



#+BEGIN_SRC emacs-lisp

  (defun insert-org-or-md-img-link (prefix imagename)
    (if (equal (file-name-extension (buffer-file-name)) "md")
        (insert (format "[[%s][%s%s]]" imagename prefix imagename)))
    (insert (format "%s%s fi %s%s%s" "{" "%" prefix (concat (format-time-string "%Y.%m.%d.%H.%M") "." imagename " %" "}"))))

  (defun capture-screenshot (basename)
    "Take a screenshot into a time stamped unique-named file in the
  same directory as the org-buffer/markdown-buffer and insert a link to this file."
    (interactive "sScreenshot name: ")
    (if (equal basename "")
        (setq basename (format-time-string "%Y%m%d_%H%M%S")))
    (setq fullpath
          (concat (file-name-directory (buffer-file-name))
                  (file-name-base (buffer-file-name))
                  "_"
                  basename))
    (progn
      (call-process "screencapture" nil nil nil "-s"
                    (concat  "/Users/xieyiming/blog/source/images/"  (format-time-string "%Y.%m.%d.%H.%M") "."  basename  ".png"))
      (insert-org-or-md-img-link "/images/" (concat basename ".png")))
    (insert "\n"))

#+END_SRC

*注意事项*

1. nexT 主题会拦截 *{* *%* 以及 *%* *}* 组成的字符串，这是其 [[http://theme-next.iissnan.com/tag-plugins.html][内建标签]] 的关键字，连在一起使用会导致 hexo 编译错误。
   这也是为何上面 elisp 代码中把 *{* *%* 以及 *%* *}* 分开拼装的原因。

2. org 文档中无法使用 MarkDown 的图片引用法则,  比如: *![alt](/images/2016.04.25.23.53.jietu.png)*, 这样写不报错但也不会被正确解析。

3. 这种写法有一个好处是无论在首页还是在具体某一篇文章页面，其所引用的图片都指向公共目录
   *source/images/xxx.png*,  不需要在去配置资源的相对路径什么的, 对于图片不是很多的个人博客来说还是比较方便的。

4. 好处之二就是可以利用[[https://github.com/syl20bnr/spacemacs/tree/master/layers/org%20%20%20][ 各种 org 魔法]] 来写博客啦！


** 插入链接
   C-c C-l 按照提示输入即可:

  [[http://www.google.com][google]]

** 插入表格

   输入
   #+BEGIN_SRC text
    | Name  | Phone | Age |
    |-------+-------+-----|
    | Peter |  1234 |  17 |
    | Anna  |  4321 |  25 |

   #+END_SRC

   会被渲染为 (按 TAB 即可自动对齐)：

    | Name  | Phone | Age |
    |-------+-------+-----|
    | Peter |  1234 |  17 |
    | Anna  |  4321 |  25 |
